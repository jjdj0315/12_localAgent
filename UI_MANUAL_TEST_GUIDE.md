# Feature 002: UI 수동 인수 테스트 가이드

**목적**: 브라우저에서 직접 실행하는 20개 체크리스트 단계별 안내
**예상 소요 시간**: 15-20분
**테스트 일시**: 2025-11-03
**시스템 상태**: 정상 가동 중 (백엔드 4시간, 프론트엔드 46분 가동)

---

## 사전 준비

### 1. 시스템 접속 확인
- [ ] 브라우저 열기 (Chrome, Edge, Firefox 권장)
- [ ] http://localhost:3000 접속
- [ ] 로그인 페이지 표시 확인

### 2. 관리자 계정 로그인
- [ ] 관리자 이메일 입력
- [ ] 비밀번호 입력
- [ ] 로그인 성공 확인

### 3. 관리자 대시보드 접속
- [ ] http://localhost:3000/admin 자동 리다이렉트 확인
- [ ] 대시보드 메인 페이지 로드 확인
- [ ] "시스템 메트릭 히스토리" 섹션 찾기 (페이지 하단 또는 중간)

---

## User Story 1: 과거 메트릭 조회 (AS-1.1 ~ AS-1.3)

### AS-1.1: 7일 그래프 데이터 확인 (4개 체크리스트)

#### ✅ 체크리스트 1: 6개 메트릭 그래프 표시 확인
**기대 결과**: 다음 6개 그래프가 모두 표시되어야 함
- [ ] "활성 사용자 수" 그래프 표시
- [ ] "저장소 용량 (바이트)" 그래프 표시
- [ ] "활성 세션 수" 그래프 표시
- [ ] "대화 개수" 그래프 표시
- [ ] "문서 개수" 그래프 표시
- [ ] "태그 개수" 그래프 표시

**확인 방법**:
- 각 그래프에 제목이 한글로 표시되는지 확인
- 그래프가 빈 화면이 아닌 실제 데이터 선(line)이 그려져 있는지 확인

**예상 모습**: 6개의 라인 차트가 세로로 또는 2열 그리드로 배치

---

#### ✅ 체크리스트 2: 그래프 호버 시 한글 툴팁 확인
**기대 결과**: 그래프 위에 마우스 올리면 한글 툴팁 표시

**확인 방법**:
1. 아무 그래프 위에 마우스 커서 올리기
2. 툴팁 팝업 확인:
   - 시간: "2025-11-03 06:00" 형식
   - 값: 숫자 (예: "7")
   - 메트릭명: 한글 (예: "대화 개수")

**통과 조건**:
- [ ] 툴팁이 한글로 표시됨
- [ ] 시간과 값이 정확히 표시됨
- [ ] 마우스 이동 시 툴팁이 실시간 업데이트됨

---

#### ✅ 체크리스트 3: 시간 범위 선택 버튼 (7/30/90일)
**기대 결과**: 시간 범위 버튼 클릭 시 그래프 데이터 변경

**확인 방법**:
1. "7일" 버튼 클릭
   - [ ] 버튼이 하이라이트됨
   - [ ] 그래프가 7일 데이터로 업데이트
2. "30일" 버튼 클릭
   - [ ] 버튼이 하이라이트됨
   - [ ] 그래프가 30일 데이터로 업데이트
3. "90일" 버튼 클릭
   - [ ] 버튼이 하이라이트됨
   - [ ] 그래프가 90일 데이터로 업데이트

**참고**: 현재 시스템이 7시간만 가동되어 실제 데이터는 적을 수 있음. 버튼 동작과 그래프 업데이트만 확인하면 됨.

---

#### ✅ 체크리스트 4: 세분화 토글 (시간별/일별)
**기대 결과**: 세분화 토글 시 그래프 데이터 포인트 변경

**확인 방법**:
1. "시간별" 토글 클릭
   - [ ] 토글 상태 변경 확인
   - [ ] 그래프가 시간별 데이터로 업데이트
   - [ ] 데이터 포인트가 많음 (매 시간마다 점)
2. "일별" 토글 클릭
   - [ ] 토글 상태 변경 확인
   - [ ] 그래프가 일별 데이터로 업데이트
   - [ ] 데이터 포인트가 적음 (하루에 한 점)

**참고**: 현재 시스템이 자정을 넘기지 않았다면 일별 데이터가 없을 수 있음 (정상 동작).

---

### AS-1.2: 현재 값 표시 (2개 체크리스트)

#### ✅ 체크리스트 5: 현재 메트릭 값 표시
**기대 결과**: 각 그래프 옆 또는 위에 현재 값이 큰 숫자로 표시

**확인 방법**:
- [ ] "활성 사용자 수" 현재 값 표시 (예: "0" 또는 숫자)
- [ ] "저장소 용량" 현재 값 표시
- [ ] "활성 세션 수" 현재 값 표시
- [ ] "대화 개수" 현재 값 표시 (예: "7")
- [ ] "문서 개수" 현재 값 표시
- [ ] "태그 개수" 현재 값 표시

**통과 조건**: 6개 메트릭 모두 현재 값이 표시되어야 함

---

#### ✅ 체크리스트 6: 수집 시간 표시
**기대 결과**: 현재 값 옆에 마지막 수집 시간 표시

**확인 방법**:
- [ ] "마지막 수집: 2025-11-03 06:00" 형식 확인
- [ ] 시간이 최근(1시간 이내)인지 확인
- [ ] 한글 텍스트로 표시되는지 확인

---

## User Story 2: 기간 비교 (AS-2.1 ~ AS-2.3)

### AS-2.1: 비교 모드 활성화 (3개 체크리스트)

#### ✅ 체크리스트 7: 비교 모드 버튼
**기대 결과**: "비교" 버튼 클릭 시 비교 모드 UI 표시

**확인 방법**:
1. 일반 모드에서 시작
   - [ ] "일반" 모드 버튼이 활성화되어 있음
2. "비교" 버튼 클릭
   - [ ] 버튼 상태가 "비교"로 변경됨
   - [ ] 추가 UI 요소 표시 (기간 선택 드롭다운)

---

#### ✅ 체크리스트 8: 기간 선택 (이번 주 / 지난 주)
**기대 결과**: 비교할 기간을 선택할 수 있음

**확인 방법**:
1. "이번 주" 선택
   - [ ] 드롭다운에서 "이번 주" 선택
   - [ ] 그래프가 업데이트됨
2. "지난 주" 선택
   - [ ] 드롭다운에서 "지난 주" 선택
   - [ ] 그래프가 업데이트됨

**참고**: 현재 시스템이 7시간만 가동되어 두 기간 모두 데이터가 부족할 수 있음. UI 동작만 확인.

---

#### ✅ 체크리스트 9: 두 기간 오버레이 표시
**기대 결과**: 두 기간의 데이터가 다른 색상으로 하나의 그래프에 표시

**확인 방법**:
- [ ] 그래프에 두 개의 선(line)이 표시됨
- [ ] 두 선이 서로 다른 색상임 (예: 파란색 vs 회색, 빨간색 vs 녹색)
- [ ] 범례(legend)에 "이번 주", "지난 주" 레이블 표시

---

### AS-2.2: 비율 변화 표시 (2개 체크리스트)

#### ✅ 체크리스트 10: 비율 변화 숫자
**기대 결과**: 각 메트릭에 비율 변화 표시

**확인 방법**:
- [ ] "+19%" 또는 "-5%" 형식의 텍스트 표시
- [ ] 퍼센트 기호(%) 포함
- [ ] 숫자가 정확한지 확인 (이전 기간 대비)

**참고**: 데이터가 부족하면 "데이터 부족" 메시지가 표시될 수 있음.

---

#### ✅ 체크리스트 11: 상승/하락 화살표
**기대 결과**: 비율 변화 옆에 화살표 아이콘 표시

**확인 방법**:
- [ ] 증가 시: ↑ (위쪽 화살표) 또는 녹색/파란색 아이콘
- [ ] 감소 시: ↓ (아래쪽 화살표) 또는 빨간색 아이콘
- [ ] 변화 없음: → (옆쪽 화살표) 또는 회색 아이콘

---

### AS-2.3: 20% 이상 변화 강조 (1개 체크리스트)

#### ✅ 체크리스트 12: 큰 변화 시각적 강조
**기대 결과**: 20% 이상 변화 시 특별한 시각적 표시

**확인 방법**:
- [ ] 20% 이상 증가: 굵은 글씨, 녹색 배경, 또는 테두리
- [ ] 20% 이상 감소: 굵은 글씨, 빨간색 배경, 또는 테두리
- [ ] 20% 미만 변화: 일반 스타일

**테스트 방법**: 여러 메트릭을 확인하여 큰 변화가 있는 항목이 강조되는지 확인

---

## User Story 3: 데이터 내보내기 (AS-3.1 ~ AS-3.3)

### AS-3.1: CSV 내보내기 (2개 체크리스트)

#### ✅ 체크리스트 13: CSV 내보내기 버튼
**기대 결과**: CSV 파일 다운로드

**확인 방법**:
1. "CSV 내보내기" 버튼 찾기
   - [ ] 내보내기 섹션에 버튼 표시됨
2. 버튼 클릭
   - [ ] 다운로드 시작됨
   - [ ] 파일명: `metrics_export_YYYYMMDD_HHMMSS.csv` 형식
3. 파일 확인
   - [ ] 다운로드 폴더에 CSV 파일 생김

---

#### ✅ 체크리스트 14: CSV 파일 내용 확인
**기대 결과**: Excel에서 열었을 때 한글 헤더와 데이터 정상 표시

**확인 방법**:
1. 다운로드한 CSV 파일을 Excel 또는 텍스트 에디터로 열기
2. 헤더 확인:
   - [ ] "수집 시간", "메트릭 타입", "값", "세분화" 등 한글 헤더
   - [ ] 인코딩 깨짐 없음 (UTF-8 BOM)
3. 데이터 확인:
   - [ ] 각 행에 메트릭 데이터가 올바르게 표시됨
   - [ ] 날짜/시간 형식 정상 (ISO 8601)
   - [ ] 숫자 값 정상

---

### AS-3.2: 날짜 범위 제한 (1개 체크리스트)

#### ✅ 체크리스트 15: 내보내기 날짜 범위 선택
**기대 결과**: 특정 날짜 범위만 내보낼 수 있음

**확인 방법**:
1. 날짜 범위 선택기 찾기
   - [ ] "시작 날짜"와 "종료 날짜" 입력 필드 또는 드롭다운
2. 14일 범위 선택
   - [ ] 시작 날짜: 오늘 - 14일
   - [ ] 종료 날짜: 오늘
3. CSV 내보내기
   - [ ] 다운로드된 파일에 14일 데이터만 포함되는지 확인

**참고**: 현재 시스템이 7시간만 가동되어 7시간치 데이터만 내보내질 수 있음.

---

### AS-3.3: PDF 내보내기 (3개 체크리스트)

#### ✅ 체크리스트 16: PDF 내보내기 버튼
**기대 결과**: PDF 파일 다운로드

**확인 방법**:
1. "PDF 내보내기" 버튼 찾기
   - [ ] 내보내기 섹션에 버튼 표시됨
2. 버튼 클릭
   - [ ] 다운로드 시작됨
   - [ ] 파일명: `metrics_report_YYYYMMDD_HHMMSS.pdf` 형식
3. 파일 확인
   - [ ] 다운로드 폴더에 PDF 파일 생김

---

#### ✅ 체크리스트 17: PDF 내용 확인
**기대 결과**: PDF에 그래프와 요약 테이블 포함

**확인 방법**:
1. 다운로드한 PDF 파일을 Adobe Acrobat, Edge, Chrome 등으로 열기
2. 내용 확인:
   - [ ] 제목: "메트릭 리포트" (한글)
   - [ ] 날짜 범위 표시
   - [ ] 6개 메트릭 그래프 이미지 포함
   - [ ] 요약 테이블 (메트릭 타입, 현재 값, 변화율 등)

---

#### ✅ 체크리스트 18: PDF 한글 폰트 렌더링 확인 ⭐ **중요!**
**기대 결과**: 한글이 깨지지 않고 정상 표시

**확인 방법**:
1. PDF 파일에서 한글 텍스트 확인:
   - [ ] "활성 사용자 수" 텍스트가 정상 표시됨
   - [ ] "저장소 용량 (바이트)" 텍스트가 정상 표시됨
   - [ ] "대화 개수" 등 모든 한글 레이블 정상
2. 폰트 확인:
   - [ ] 한글이 네모 박스(□)가 아닌 실제 글자로 표시됨
   - [ ] NanumGothic 폰트 적용되어 깔끔하게 표시됨
3. 그래프 레이블 확인:
   - [ ] X축/Y축 레이블 한글 정상
   - [ ] 범례(legend) 한글 정상

**실패 시 조치**: 한글이 깨진다면 백엔드 코드에서 ReportLab 폰트 설정 확인 필요

---

## 시스템 상태 표시기 (FR-018)

### 수집 상태 위젯 (2개 체크리스트)

#### ✅ 체크리스트 19: 상태 표시기 색상
**기대 결과**: 수집 상태에 따라 색상 변경

**확인 방법**:
1. 상태 위젯 찾기
   - [ ] "데이터 수집 상태" 또는 "수집 상태" 위젯 표시됨
2. 색상 확인:
   - **녹색 (정상)**: 마지막 수집 5분 이내 AND 24시간 내 실패 3건 미만
   - **노란색 (주의)**: 마지막 수집 5-60분 OR 24시간 내 실패 3-10건
   - **빨간색 (오류)**: 마지막 수집 1시간 이상 OR 24시간 내 실패 10건 이상
   - [ ] 현재 상태에 맞는 색상이 표시됨

---

#### ✅ 체크리스트 20: 마지막 수집 시간 및 실패 카운트
**기대 결과**: 상태 위젯에 상세 정보 표시

**확인 방법**:
- [ ] "마지막 수집: 5분 전" 또는 "2025-11-03 06:00" 형식으로 시간 표시
- [ ] "24시간 내 실패: 4건" 형식으로 실패 카운트 표시
- [ ] 한글로 표시됨
- [ ] 실시간 업데이트됨 (페이지 새로고침 시 변경)

---

## 테스트 완료 후 체크

### 최종 확인
- [ ] 20개 체크리스트 모두 완료
- [ ] 실패한 항목이 있다면 상세 내용 기록
- [ ] 스크린샷 캡처 (선택사항)

### 결과 기록
- 통과한 체크리스트: _____ / 20
- 실패한 체크리스트: _____ 개
- 경고/이슈: _____________________

---

## 알려진 제한사항

현재 시스템 실행 시간: **약 7시간** (2025-11-03 06:00 기준)

이로 인해 다음 항목들은 데이터 부족으로 제한적일 수 있음 (정상 동작):

1. **일별 세분화**: 자정을 넘기지 않아 일별 집계 데이터 없음
2. **7일/30일/90일 범위**: 현재는 7시간치 데이터만 존재
3. **기간 비교**: 이번 주/지난 주 비교 시 데이터 부족
4. **수집 실패 4건**: 시스템 시작 시 일시적 연결 문제 (이후 정상)

**이러한 제한사항은 시스템을 계속 실행하면 자동으로 해결됩니다.**

---

## 문제 발생 시

### 자주 발생하는 이슈

1. **그래프가 안 보임**:
   - 브라우저 콘솔(F12) 확인
   - 페이지 새로고침(Ctrl+F5)
   - Docker 컨테이너 상태 확인: `docker ps`

2. **CSV/PDF 다운로드 안 됨**:
   - 브라우저 팝업 차단 해제
   - 다운로드 폴더 권한 확인
   - 백엔드 로그 확인: `docker-compose logs backend`

3. **한글이 깨짐**:
   - CSV: UTF-8 BOM 인코딩 확인
   - PDF: NanumGothic 폰트 설치 확인

### 도움 받기
- 백엔드 로그: `docker-compose logs backend`
- 프론트엔드 로그: `docker-compose logs frontend`
- 데이터베이스 쿼리: `test_acceptance_full.sh` 실행

---

**테스트 시작 전 준비 완료!**
이제 브라우저를 열고 http://localhost:3000/admin 으로 이동하여 테스트를 시작하세요.
