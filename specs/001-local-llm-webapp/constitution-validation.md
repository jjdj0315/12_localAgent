# 헌법 검증 절차

## 목적
MVP 배포 전 constitution.md의 비협상 원칙 준수 여부를 검증합니다.

## 검증 항목

### I. 폐쇄망 호환성 (T058)
**검증 방법:**
1. 네트워크 차단 상태에서 `docker-compose up` 실행
2. 외부 DNS 조회 시도 없이 모든 서비스 시작 확인
3. 로그에서 외부 API 호출 오류 검색 (허용 안 함)
4. 사용자 생성, 로그인, 쿼리 제출, 응답 수신까지 전체 플로우 테스트

**합격 기준:** 모든 기능이 인터넷 연결 없이 작동

### II. 한국어 지원 (T059)
**검증 방법:**
1. 50개 한국어 쿼리 세트 준비 (다양한 업무 시나리오)
2. 각 응답을 3가지 기준으로 수동 평가:
   - 문법 정확성 (0-10점)
   - 질문 관련성 (0-10점)
   - 한국어 자연스러움 (0-10점)
3. 평균 점수 계산

**합격 기준:** 90% 이상의 쿼리가 24/30점 이상 획득

**테스트 쿼리 예시:**
- 행정 업무: "공문서 작성 시 주의사항은 무엇인가요?"
- 문서 작성: "회의록 양식을 작성해주세요"
- 정책 질문: "개인정보 보호법의 주요 내용을 요약해주세요"
- 후속 질문: "그럼 위반 시 처벌 규정은 어떻게 되나요?"

### III. 보안 및 개인정보 (T098-T101)
**검증 방법:**
1. 2개 사용자 계정 생성
2. 사용자 A로 로그인하여 대화 생성
3. 사용자 B로 로그인하여 사용자 A의 대화 접근 시도
4. 403 Forbidden 응답 확인

**합격 기준:** 교차 사용자 접근 모두 차단됨

### IV. 단순성 및 유지보수성
**검증 방법:**
1. 아키텍처 검토: 모놀리식 배포 확인
2. 의존성 검토: 확립된 라이브러리 사용 확인 (vLLM, LangChain, React Query)
3. 코드 구조 검토: 프론트엔드/백엔드/LLM 서비스 명확한 분리 확인

**합격 기준:** plan.md의 기술 스택 및 아키텍처 결정 준수

### V. 테스트 가능성 및 관찰 가능성
**검증 방법:**
1. 구조화된 로깅 확인: JSON 형식 로그 출력 확인
2. 한국어 오류 메시지 확인: 모든 API 엔드포인트에서 한국어 오류 반환 확인
3. 상태 체크 엔드포인트 확인: `/health` 엔드포인트 응답 확인
4. 수동 테스트: 각 사용자 스토리의 수락 시나리오 실행

**합격 기준:**
- 모든 로그가 JSON 형식으로 출력
- 모든 오류 메시지가 한국어로 표시
- 상태 체크 엔드포인트가 정상 응답

## 검증 실패 시 조치
헌법 검증 실패 시 해당 원칙 위반으로 간주하며 **배포 불가**입니다.
수정 후 재검증 필요합니다.

### 실패 시 에스컬레이션
1. **치명적 실패 (I, II, III)**: 즉시 구현 중단, 원인 분석, 수정 후 전체 재검증
2. **높은 우선순위 실패 (IV, V)**: 이슈 기록, 수정 일정 수립, 다음 배포 전 해결

## 검증 주기
- **최초 검증**: Phase 3 (User Story 1) 완료 후
- **재검증**: 각 사용자 스토리 완료 후
- **최종 검증**: Phase 8 (Polish) 완료 후 프로덕션 배포 전

## 검증 결과 기록
각 검증 실행 시 다음 정보를 기록:
- 검증 일시
- 검증자
- 각 원칙별 합격/불합격 상태
- 실패 항목의 상세 내용
- 조치 계획

**기록 위치**: `specs/001-local-llm-webapp/validation-results.md`
