# Development Environment Configuration
# Local LLM Web Application for Local Government
#
# Usage: Copy to .env and modify values for development setup
# WARNING: DO NOT commit .env to version control

# =============================================================================
# APPLICATION
# =============================================================================
NODE_ENV=development
DEBUG=true
LOG_LEVEL=DEBUG

# =============================================================================
# DATABASE
# =============================================================================
# PostgreSQL connection (development)
DATABASE_URL=postgresql+asyncpg://llm_user:llm_password@localhost:5432/llm_webapp_dev
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10

# For synchronous operations
DATABASE_URL_SYNC=postgresql://llm_user:llm_password@localhost:5432/llm_webapp_dev

# =============================================================================
# SECURITY
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=dev_secret_key_change_in_production_DO_NOT_USE_THIS
SESSION_TIMEOUT_MINUTES=30
MAX_CONCURRENT_SESSIONS=3
BCRYPT_ROUNDS=12

# CORS (development - allow all)
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8000"]
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# LLM CONFIGURATION
# =============================================================================
# Model path (development - local path)
GGUF_MODEL_PATH=C:/02_practice/12_localAgent/models/qwen2.5-3b-instruct-q4_k_m.gguf
LLM_BACKEND=llama_cpp  # Options: llama_cpp (CPU), vllm (GPU)

# llama.cpp settings (CPU - development)
N_CTX=2048  # Context window
N_THREADS=4  # CPU threads
N_GPU_LAYERS=0  # 0 = CPU only, increase for GPU

# Generation parameters
TEMPERATURE=0.7
MAX_TOKENS=500
TOP_P=0.9

# =============================================================================
# EMBEDDING MODEL
# =============================================================================
EMBEDDING_MODEL_PATH=./models/paraphrase-multilingual-MiniLM-L12-v2
SENTENCE_TRANSFORMERS_HOME=./models

# =============================================================================
# STORAGE
# =============================================================================
# File upload settings
UPLOAD_DIR=./data/uploads
MAX_UPLOAD_SIZE_MB=50
ALLOWED_EXTENSIONS=.pdf,.docx,.txt

# User quota (development - generous limits)
USER_STORAGE_QUOTA_GB=50
AUTO_CLEANUP_ENABLED=false  # Disable auto-cleanup in dev
INACTIVE_DAYS_THRESHOLD=90

# =============================================================================
# RATE LIMITING
# =============================================================================
# Development - relaxed limits
RATE_LIMIT_PER_MINUTE=120
RATE_LIMIT_PER_HOUR=1000

# Login attempts (development)
MAX_LOGIN_ATTEMPTS=10
LOGIN_LOCKOUT_MINUTES=5

# =============================================================================
# ADVANCED FEATURES
# =============================================================================
# Safety Filter
ENABLE_SAFETY_FILTER=true
ENABLE_ML_FILTER=true  # Enable toxic-bert (slower, more accurate)
ENABLE_PII_DETECTION=true

# ReAct Agent
ENABLE_REACT_AGENT=true
MAX_REACT_SESSIONS=20  # Higher for development
REACT_MAX_ITERATIONS=10

# Multi-Agent System
ENABLE_MULTI_AGENT=true
MAX_AGENT_WORKFLOWS=10  # Higher for development

# =============================================================================
# RESPONSE LIMITS
# =============================================================================
MAX_RESPONSE_LENGTH=8000  # Development - higher limit
MAX_DOCUMENT_RESPONSE_LENGTH=15000
MAX_CONVERSATION_MESSAGES=2000  # Development - higher limit

# =============================================================================
# LOGGING
# =============================================================================
# Development - verbose logging
LOG_FORMAT=json
LOG_FILE=./logs/app_dev.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=7

# Audit logging
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_FILE=./logs/audit_dev.log

# =============================================================================
# EXTERNAL SERVICES (Development - Optional)
# =============================================================================
# vLLM API (if using GPU backend)
# VLLM_API_BASE=http://localhost:8001/v1
# VLLM_API_KEY=dev_key

# =============================================================================
# FEATURE FLAGS (Development)
# =============================================================================
ENABLE_STREAMING=true
ENABLE_DOCUMENT_CHAT=true
ENABLE_TAG_AUTOSUGGESTION=true

# =============================================================================
# BACKUP (Development)
# =============================================================================
BACKUP_DIR=./backups/dev
BACKUP_RETENTION_DAYS=7
AUTO_BACKUP_ENABLED=false  # Manual backups only in dev

# =============================================================================
# FRONTEND (Development)
# =============================================================================
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000

# =============================================================================
# DOCKER (Development)
# =============================================================================
COMPOSE_PROJECT_NAME=llm_webapp_dev
